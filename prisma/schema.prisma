generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Assistant {
  id             String   @id @default(uuid())
  openaiId       String   @unique @map("openai_id")
  name           String
  instructions   String
  model          String
  tools          String[]
  temperature    Float
  topP           Float    @map("top_p")
  responseFormat Json
  fileIds        String[] @map("file_ids")
  openaiApiKey   String   @map("openai_api_key")
  createdAt      DateTime @default(now()) @map("created_at")
  updatedAt      DateTime @updatedAt @map("updated_at")
  threads        Thread[]

  @@map("assistants")
}

model Thread {
  id          String    @id @default(uuid())
  openaiId    String    @unique @map("openai_id")
  assistantId String    @map("assistant_id")
  createdAt   DateTime  @default(now()) @map("created_at")
  updatedAt   DateTime  @updatedAt @map("updated_at")
  assistant   Assistant @relation(fields: [assistantId], references: [id], onDelete: Cascade)

  @@map("threads")
}
